<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二次模型 - 转炉过程动态控制系统</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .secondary-header {
            background: linear-gradient(135deg, #ff8800 0%, #cc6600 100%);
            color: white;
            padding: 20px 25px;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .secondary-header h1 {
            margin: 0 0 8px 0;
            font-size: 24px;
        }
        
        .secondary-header p {
            margin: 0;
            opacity: 0.95;
            font-size: 13px;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            padding: 15px 25px;
            background: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .nav-tab {
            padding: 10px 20px;
            background: white;
            border: 2px solid #ff8800;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            color: #ff8800;
            text-decoration: none;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .nav-tab.active {
            background: #ff8800;
            color: white;
        }
        
        .nav-tab:hover {
            background: #ff8800;
            color: white;
        }

        /* 传感器分类标签页 */
        .sensor-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            border-bottom: 2px solid #d0d0d0;
            overflow-x: auto;
        }

        .sensor-tab {
            padding: 8px 15px;
            background: #f5f5f7;
            border: 2px solid #d0d0d0;
            border-bottom: none;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            color: #606060;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .sensor-tab.active {
            background: white;
            color: #0066cc;
            border-color: #0066cc;
            border-bottom: 2px solid white;
            margin-bottom: -2px;
        }

        .sensor-tab:hover {
            background: #e8eaed;
        }

        .sensor-content {
            display: none;
        }

        .sensor-content.active {
            display: block;
        }

        /* 多图表网格布局 */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        .chart-card {
            background: white;
            border: 2px solid #d0d0d0;
            border-left: 3px solid #0066cc;
            padding: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        .chart-card-title {
            font-size: 12px;
            font-weight: bold;
            color: #0066cc;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-card-canvas {
            height: 220px;
        }

        /* 综合视图的大图 */
        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-card.full-width .chart-card-canvas {
            height: 300px;
        }

        /* 实时数值显示 */
        .realtime-value {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 8px;
            background: rgba(0,102,204,0.05);
            border-radius: 3px;
            margin-bottom: 8px;
        }

        .realtime-value-label {
            font-size: 10px;
            color: #606060;
        }

        .realtime-value-number {
            font-size: 13px;
            font-weight: bold;
            color: #0066cc;
            font-family: 'Consolas', monospace;
        }

        /* 状态指示器 */
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-indicator.normal {
            background: #00aa44;
            box-shadow: 0 0 4px rgba(0,170,68,0.5);
        }

        .status-indicator.warning {
            background: #ff8800;
            box-shadow: 0 0 4px rgba(255,136,0,0.5);
        }

        .status-indicator.danger {
            background: #cc0000;
            box-shadow: 0 0 4px rgba(204,0,0,0.5);
        }

        /* 实时数值状态颜色 */
        .realtime-value-number.status-warning {
            color: #ff8800;
        }

        .realtime-value-number.status-danger {
            color: #cc0000;
        }

        /* 滚动条优化 */
        .left-panel::-webkit-scrollbar {
            width: 6px;
        }

        .left-panel::-webkit-scrollbar-track {
            background: #f0f0f2;
        }

        .left-panel::-webkit-scrollbar-thumb {
            background: #c0c0c0;
            border-radius: 3px;
        }

        /* 图表卡片悬停效果 */
        .chart-card:hover {
            border-left-color: #ff8800;
            box-shadow: 0 3px 10px rgba(0,102,204,0.15);
            transform: translateY(-1px);
            transition: all 0.2s;
        }

        /* 标签页滚动条 */
        .sensor-tabs::-webkit-scrollbar {
            height: 4px;
        }

        .sensor-tabs::-webkit-scrollbar-track {
            background: #f0f0f2;
        }

        .sensor-tabs::-webkit-scrollbar-thumb {
            background: #0066cc;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 二次模型标识头部 -->
        <div class="secondary-header">
            <h1>⚡ 二次模型 - 转炉过程动态控制系统</h1>
            <p>实时监控吹炼过程，动态预测终点参数，智能推荐操作建议</p>
        </div>
        
        <!-- 导航标签 -->
        <div class="nav-tabs">
            <a href="primary_model.html" class="nav-tab">一次模型（吹炼前预测）</a>
            <a href="secondary_model.html" class="nav-tab active">二次模型（过程动态控制）</a>
        </div>
        
        <!-- 顶部 -->
        <div class="header">
            <div class="header-left">
                <div class="select-group">
                    <label>工厂</label>
                    <select id="factorySelect">
                        <option>A厂转炉车间</option>
                        <option>B厂转炉车间</option>
                    </select>
                </div>
                <div class="select-group">
                    <label>转炉规格</label>
                    <select id="furnaceTypeSelect" onchange="updateFurnaceType()">
                        <option value="150">150t转炉</option>
                        <option value="250">250t转炉</option>
                    </select>
                </div>
                <div class="select-group">
                    <label>炉次</label>
                    <select id="furnaceSelect" onchange="updateFurnaceData()">
                        <option>150t-3#炉 - 20251102-001</option>
                        <option>150t-3#炉 - 20251102-002</option>
                        <option>250t-1#炉 - 20251102-003</option>
                        <option>250t-1#炉 - 20251102-004</option>
                    </select>
                </div>
                <div class="furnace-summary">
                    <div class="summary-item">
                        <span class="label">开始时间</span>
                        <span class="value" id="startTime">10:32:15</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">铁水温度</span>
                        <span class="value" id="ironTemp">1349.7°C</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">入炉[Si]</span>
                        <span class="value" id="inputSi">0.38%</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">入炉[Mn]</span>
                        <span class="value" id="inputMn">0.28%</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">入炉[P]</span>
                        <span class="value" id="inputP">0.143‰</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">入炉[S]</span>
                        <span class="value" id="inputS">0.008‰</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="status-light running">
                    <div>吹炼中<br>12:35</div>
                </div>
            </div>
        </div>

        <!-- 左侧面板 -->
        <div class="left-panel">
            <div class="panel-title">炉次事件时间轴</div>
            
            <div class="replay-controls">
                <button onclick="replayControl('backward')">◄◄</button>
                <button onclick="replayControl('play')" id="playBtn">▶</button>
                <button onclick="replayControl('forward')">►►</button>
                <input type="range" class="replay-slider" id="replaySlider" min="0" max="100" value="70" style="width: 100%;">
                <span id="replayTime">12:35</span>
            </div>

            <div class="timeline" id="timeline">
                <div class="timeline-item">
                    <div class="timeline-time">10:32</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <strong>兑铁开始</strong><br>
                        <span id="timelineIronInfo">铁水量: 150t, 温度: 1349.7°C, Si: 0.38%, Mn: 0.28%</span>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-time">10:35</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <strong>吹氧开始</strong><br>
                        初始枪位: 1800mm, 初始氧流量: 28000 Nm³/min
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">10:42</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content sample">
                        <strong>副枪采样</strong><br>
                        C: 0.35%, 温度: 1520°C
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">10:48</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <strong>造渣操作</strong><br>
                        石灰: 2500kg, 白云石: 800kg, 萤石: 200kg
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">10:56</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <strong>底吹启动</strong><br>
                        底吹氩气流量: 80 Nm³/min，强化熔池搅拌
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">11:08</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content alert">
                        <strong>⚠️ 泡沫预警</strong><br>
                        泡沫指数达到3.8，渣位升高，建议调整枪位或投入消泡剂
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">11:15</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content alert">
                        <strong>⚠️ 烟气分析异常</strong><br>
                        CO浓度升高至28%，碳氧积偏离目标2150，脱碳速率偏快
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">11:28</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <strong>控温操作</strong><br>
                        喷洒冷却剂150kg，控制温升速率至+8°C/min
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">11:42</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content" style="border-left-color: #00aa44; background: rgba(0,170,68,0.1); box-shadow: 0 2px 8px rgba(0,170,68,0.15);">
                        <strong style="color: #00aa44;">✓ ML建议已执行</strong><br>
                        氧流量降至 25000 Nm³/min，枪位提升至 1620mm，枪位角度微调至14°
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">11:55</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <strong>合金预加</strong><br>
                        锰铁: 350kg, 硅铁: 180kg（预备终点合金化）
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">12:05</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content sample">
                        <strong>副枪采样</strong><br>
                        C: 0.08%, 温度: 1632°C
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-time">12:35</div>
                    <div class="timeline-marker"></div>
                    <div class="timeline-content" style="border-left-color: #ff8800; background: rgba(255,136,0,0.1); box-shadow: 0 2px 8px rgba(255,136,0,0.2);">
                        <strong style="color: #ff8800;">当前位置</strong><br>
                        预计还需 3-5 分钟达到终点
                    </div>
                </div>
            </div>

            <div class="panel-title" style="margin-top: 20px;">当前状态估计（软测量）</div>
            
            <!-- 当前状态实时估计 -->
            <div style="background: rgba(0,170,68,0.08); border: 2px solid #00aa44; border-left: 4px solid #00aa44; padding: 12px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,170,68,0.15);">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 12px;">
                    <div>
                        <span style="color: #606060;">当前估计温度 T̂(t):</span><br>
                        <strong style="color: #00aa44; font-size: 18px; font-family: 'Consolas', monospace;" id="currentTempEst">1632°C</strong>
                        <span style="color: #999; font-size: 10px;">(更新: 2秒前)</span>
                    </div>
                    <div>
                        <span style="color: #606060;">当前估计碳含量 Ĉ(t):</span><br>
                        <strong style="color: #00aa44; font-size: 18px; font-family: 'Consolas', monospace;" id="currentCarbonEst">0.082%</strong>
                        <span style="color: #999; font-size: 10px;">(更新: 3秒前)</span>
                    </div>
                    <div>
                        <span style="color: #606060;">炉渣氧化性 FeÔ(t):</span><br>
                        <strong style="color: #ff8800; font-size: 16px; font-family: 'Consolas', monospace;" id="currentSlagOx">18.3%</strong>
                        <span style="color: #999; font-size: 10px;">(更新: 8秒前)</span>
                    </div>
                    <div>
                        <span style="color: #606060;">阶段识别:</span><br>
                        <strong style="color: #0066cc; font-size: 16px;" id="currentStage">末期</strong>
                        <span style="color: #999; font-size: 10px;">(距终点邻域)</span>
                    </div>
                </div>
            </div>

        </div>

        <!-- 中央面板 -->
        <div class="center-panel">
            <div class="panel-title">实时监控曲线 - 全参数显示</div>
            
            <!-- 传感器分类标签页 -->
            <div class="sensor-tabs">
                <div class="sensor-tab active" onclick="switchSensorTab('overview')">📊 综合视图</div>
                <div class="sensor-tab" onclick="switchSensorTab('oxygen')">🔹 吹氧系统</div>
                <div class="sensor-tab" onclick="switchSensorTab('gas')">💨 炉气信号</div>
                <div class="sensor-tab" onclick="switchSensorTab('temp')">🌡️ 温度成分</div>
                <div class="sensor-tab" onclick="switchSensorTab('slag')">⚗️ 炉渣状态</div>
                <div class="sensor-tab" onclick="switchSensorTab('acoustic')">🔊 声光信号</div>
                <div class="sensor-tab" onclick="switchSensorTab('equipment')">⚙️ 设备状态</div>
            </div>

            <!-- 综合视图 -->
            <div class="sensor-content active" id="overview-content">
                <div class="charts-grid">
                    <div class="chart-card full-width">
                        <div class="chart-card-title">关键参数综合趋势</div>
                        <div class="chart-card-canvas">
                            <canvas id="overviewChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">当前温度估计</span>
                            <span class="realtime-value-number" id="rtTemp">1632°C</span>
                        </div>
                        <div class="chart-card-title">温度趋势</div>
                        <div class="chart-card-canvas">
                            <canvas id="overviewTempChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">当前碳含量估计</span>
                            <span class="realtime-value-number" id="rtCarbon">0.082%</span>
                        </div>
                        <div class="chart-card-title">碳含量趋势</div>
                        <div class="chart-card-canvas">
                            <canvas id="overviewCarbonChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 吹氧系统 -->
            <div class="sensor-content" id="oxygen-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">O₂流量 Q_O₂(t)</span>
                            <span class="realtime-value-number" id="rtO2Flow">26850 Nm³/min</span>
                        </div>
                        <div class="chart-card-title">氧气流量</div>
                        <div class="chart-card-canvas">
                            <canvas id="oxygenFlowChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">累计氧量</span>
                            <span class="realtime-value-number" id="rtO2Cumulative">12850 Nm³</span>
                        </div>
                        <div class="chart-card-title">累计氧量</div>
                        <div class="chart-card-canvas">
                            <canvas id="oxygenCumulativeChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">枪位高度 h(t)</span>
                            <span class="realtime-value-number" id="rtLance">1580 mm</span>
                        </div>
                        <div class="chart-card-title">枪位高度</div>
                        <div class="chart-card-canvas">
                            <canvas id="lanceChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">供氧强度</span>
                            <span class="realtime-value-number" id="rtO2Intensity">179 Nm³/t·min</span>
                        </div>
                        <div class="chart-card-title">供氧强度</div>
                        <div class="chart-card-canvas">
                            <canvas id="oxygenIntensityChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 炉气信号 -->
            <div class="sensor-content" id="gas-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">烟气CO浓度</span>
                            <span class="realtime-value-number status-warning" id="rtCO">24.5%</span>
                        </div>
                        <div class="chart-card-title">CO浓度</div>
                        <div class="chart-card-canvas">
                            <canvas id="coChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">烟气CO₂浓度</span>
                            <span class="realtime-value-number" id="rtCO2">16.2%</span>
                        </div>
                        <div class="chart-card-title">CO₂浓度</div>
                        <div class="chart-card-canvas">
                            <canvas id="co2Chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">CO/(CO+CO₂)比值</span>
                            <span class="realtime-value-number" id="rtCORatio">0.602</span>
                        </div>
                        <div class="chart-card-title">碳氧比</div>
                        <div class="chart-card-canvas">
                            <canvas id="coRatioChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">炉气温度</span>
                            <span class="realtime-value-number" id="rtGasTemp">1850°C</span>
                        </div>
                        <div class="chart-card-title">炉气温度</div>
                        <div class="chart-card-canvas">
                            <canvas id="gasTempChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 温度成分 -->
            <div class="sensor-content" id="temp-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">估计温度 T̂(t)</span>
                            <span class="realtime-value-number" id="rtTempEst">1632°C</span>
                        </div>
                        <div class="chart-card-title">当前估计温度（软测量）</div>
                        <div class="chart-card-canvas">
                            <canvas id="tempEstChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">红外测温 T_IR(t)</span>
                            <span class="realtime-value-number" id="rtTempIR">1625°C</span>
                        </div>
                        <div class="chart-card-title">炉口红外测温</div>
                        <div class="chart-card-canvas">
                            <canvas id="tempIRChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">估计碳含量 Ĉ(t)</span>
                            <span class="realtime-value-number" id="rtCarbonEst">0.082%</span>
                        </div>
                        <div class="chart-card-title">当前估计碳含量（软测量）</div>
                        <div class="chart-card-canvas">
                            <canvas id="carbonEstChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">氧活性/氧含量</span>
                            <span class="realtime-value-number" id="rtOxygenContent">750 ppm</span>
                        </div>
                        <div class="chart-card-title">氧含量</div>
                        <div class="chart-card-canvas">
                            <canvas id="oxygenContentChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 炉渣状态 -->
            <div class="sensor-content" id="slag-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">炉渣氧化性 FeÔ(t)</span>
                            <span class="realtime-value-number" id="rtSlagOx">18.3%</span>
                        </div>
                        <div class="chart-card-title">炉渣氧化性</div>
                        <div class="chart-card-canvas">
                            <canvas id="slagOxChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">渣碱度 (CaO/SiO₂)</span>
                            <span class="realtime-value-number" id="rtSlagBasicity">3.2</span>
                        </div>
                        <div class="chart-card-title">渣碱度</div>
                        <div class="chart-card-canvas">
                            <canvas id="slagBasicityChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">渣位高度</span>
                            <span class="realtime-value-number" id="rtSlagLevel">850 mm</span>
                        </div>
                        <div class="chart-card-title">渣位高度</div>
                        <div class="chart-card-canvas">
                            <canvas id="slagLevelChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label"><span class="status-indicator warning"></span>泡沫指数</span>
                            <span class="realtime-value-number status-warning" id="rtFoamIndex">3.2</span>
                        </div>
                        <div class="chart-card-title">泡沫指数</div>
                        <div class="chart-card-canvas">
                            <canvas id="foamIndexChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 声光信号 -->
            <div class="sensor-content" id="acoustic-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">吹炼噪声强度</span>
                            <span class="realtime-value-number" id="rtNoise">98 dB</span>
                        </div>
                        <div class="chart-card-title">噪声强度</div>
                        <div class="chart-card-canvas">
                            <canvas id="noiseChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">火焰亮度</span>
                            <span class="realtime-value-number" id="rtFlame">8250</span>
                        </div>
                        <div class="chart-card-title">火焰亮度</div>
                        <div class="chart-card-canvas">
                            <canvas id="flameChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card full-width">
                        <div class="chart-card-title">频谱特征分析</div>
                        <div class="chart-card-canvas">
                            <canvas id="spectrumChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设备状态 -->
            <div class="sensor-content" id="equipment-content">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">顶压</span>
                            <span class="realtime-value-number" id="rtPressure">0.62 MPa</span>
                        </div>
                        <div class="chart-card-title">顶压</div>
                        <div class="chart-card-canvas">
                            <canvas id="pressureChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="realtime-value">
                            <span class="realtime-value-label">炉倾角</span>
                            <span class="realtime-value-number" id="rtFurnaceAngle">2.1°</span>
                        </div>
                        <div class="chart-card-title">炉倾角</div>
                        <div class="chart-card-canvas">
                            <canvas id="furnaceAngleChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card full-width">
                        <div class="realtime-value">
                            <span class="realtime-value-label">底吹流量</span>
                            <span class="realtime-value-number" id="rtBottomBlowing">82 Nm³/min</span>
                        </div>
                        <div class="chart-card-title">底吹流量</div>
                        <div class="chart-card-canvas">
                            <canvas id="bottomBlowingChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 右侧面板 -->
        <div class="right-panel">
            <!-- ETA剩余时间 -->
            <div style="background: rgba(255,136,0,0.1); border: 2px solid #ff8800; border-left: 4px solid #ff8800; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(255,136,0,0.2); text-align: center;">
                <div style="color: #606060; font-size: 12px; margin-bottom: 5px;">⏱️ ETA 剩余时间</div>
                <div style="color: #ff8800; font-size: 28px; font-weight: bold; font-family: 'Consolas', monospace;" id="etaTime">3-5 分钟</div>
                <div style="color: #606060; font-size: 11px; margin-top: 5px;">预计停吹时间: 12:38-12:40</div>
            </div>

            <div class="panel-title">终点预测值（实时更新）</div>
            
            <div class="prediction-card">
                <h4>🌡️ 终点温度 T_end_pred(t)（目标1640-1660°C）</h4>
                <div class="prediction-value" id="predTemp">1648°C</div>
                <div class="prediction-confidence">置信区间: 1644 - 1652°C (90%)</div>
                <div style="font-size: 10px; color: #999; margin-top: 5px;">若此刻停吹会得到的预测终点</div>
            </div>

            <div class="prediction-card">
                <h4>⚗️ 终点碳含量 C_end_pred(t)（目标≤0.05%）</h4>
                <div class="prediction-value" id="predCarbon">0.043%</div>
                <div class="prediction-confidence">置信区间: 0.038 - 0.048% (90%)</div>
                <div style="font-size: 10px; color: #999; margin-top: 5px;">若此刻停吹会得到的预测终点</div>
            </div>

            <div class="prediction-card">
                <h4>🔬 终点[P]（目标≤0.020‰）</h4>
                <div class="prediction-value" id="predPhosphorus">0.015‰</div>
                <div class="prediction-confidence">置信区间: 0.013 - 0.017‰ (90%)</div>
            </div>

            <div class="prediction-card">
                <h4>💧 终点[Mn]</h4>
                <div class="prediction-value" id="predMn">0.090%</div>
                <div class="prediction-confidence">置信区间: 0.085 - 0.095% (90%)</div>
            </div>

            <div class="prediction-card">
                <h4>⚡ 终点[S]（目标≤0.015‰）</h4>
                <div class="prediction-value" id="predS">0.011‰</div>
                <div class="prediction-confidence">置信区间: 0.010 - 0.013‰ (90%)</div>
            </div>

            <div class="panel-title" style="margin-top: 15px;">关键过程指标</div>
            
            <div class="prediction-card">
                <h4>🔥 渣中T.Fe（目标15-20%）</h4>
                <div class="prediction-value" id="predTFe">18.3%</div>
                <div class="prediction-confidence">炉渣氧化性: 良好</div>
            </div>

            <div class="prediction-card">
                <h4>📊 碳氧积（目标1800-2200）</h4>
                <div class="prediction-value" id="predCO">2014</div>
                <div class="prediction-confidence">0.01%*PPm 脱碳过程稳定</div>
            </div>

            <div class="panel-title" style="margin-top: 15px;">过程监控状态</div>
            
            <div style="background: #f5f5f7; border: 2px solid #d0d0d0; padding: 12px; margin-bottom: 15px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 11px;">
                    <div>
                        <span style="color: #606060;">烟气CO:</span>
                        <strong id="monitorCO" style="color: #0066cc;">24.5%</strong>
                    </div>
                    <div>
                        <span style="color: #606060;">烟气CO₂:</span>
                        <strong id="monitorCO2" style="color: #0066cc;">16.2%</strong>
                    </div>
                    <div>
                        <span style="color: #606060;">渣位高度:</span>
                        <strong id="monitorSlag" style="color: #0066cc;">850mm</strong>
                    </div>
                    <div>
                        <span style="color: #606060;">泡沫指数:</span>
                        <strong id="monitorFoam" style="color: #ff8800;">3.2</strong>
                    </div>
                    <div>
                        <span style="color: #606060;">底吹流量:</span>
                        <strong id="monitorBottom" style="color: #0066cc;">82 Nm³/min</strong>
                    </div>
                    <div>
                        <span style="color: #606060;">炉倾角:</span>
                        <strong id="monitorAngle" style="color: #0066cc;">2.1°</strong>
                    </div>
                </div>
            </div>

            <div style="background: rgba(0,170,68,0.1); border: 2px solid #00aa44; border-left: 4px solid #00aa44; padding: 10px; font-size: 11px; margin-bottom: 15px; box-shadow: 0 2px 6px rgba(0,170,68,0.15);">
                <strong style="color: #00aa44;">✓ 系统状态：</strong><span style="color: #303030;">正常运行</span><br>
                <span style="color: #606060;">在线传感器: 18/20 | DCS连接: 正常</span>
            </div>

            <div class="panel-title">控制建议（实时/人工提示）</div>
            
            <div class="suggestion-card" id="suggestion1">
                <div class="suggestion-header">
                    <span class="priority-badge priority-high">高优先级</span>
                    <span style="font-size: 12px; color: #999;">2分钟前</span>
                </div>
                <div class="suggestion-action">
                    🔹 多参数协同控制：氧流量 + 枪位 + 底吹流量<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 降低氧枪流量至 <strong style="color: #0066cc;">22000 Nm³/min</strong>（-18%）<br>
                        ② 提升枪位高度至 <strong style="color: #0066cc;">1650 mm</strong>（+70mm）<br>
                        ③ 增大底吹流量至 <strong style="color: #0066cc;">95 Nm³/min</strong>（+16%）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 优化脱碳速率，提高终点[C]控制精度<br>
                    🎯 预测停吹[C]: 0.041% (目标≤0.05%，精度提升15%)<br>
                    🎯 预测终点温度: 1652°C (目标1640-1660°C，命中率提升8%)<br>
                    💡 智能均衡: 减氧+提枪降低脱碳速率，增大底吹强化搅拌均匀性<br>
                    ⚡ 风险等级: 低 | 置信度: 94%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 94%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 当前碳氧积: 2150 (目标范围: 1800-2200)<br>
                        • 碳氧化速率: +0.015%/min (偏高，需降速)<br>
                        • 熔池温度趋势: 稳定上升 (+8°C/min)<br>
                        • 渣中T.Fe: 18.3% (氧化性良好)<br>
                        • 熔池搅拌均匀性: 可优化 (ΔT=25°C)<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 减氧+提枪: 降低氧射流冲击强度，减缓脱碳反应速率<br>
                        • 提枪: 扩大氧射流覆盖面积，提高熔池上部均匀性<br>
                        • 增底吹: 强化底部搅拌，补偿顶枪降速的均质化损失<br>
                        • 三参数联动: 在降速的同时保证成分均匀，避免局部过氧化
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(1)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(1)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(1)">✗ 拒绝</button>
                </div>
            </div>

            <div class="suggestion-card" id="suggestion2">
                <div class="suggestion-header">
                    <span class="priority-badge priority-medium">中优先级</span>
                    <span style="font-size: 12px; color: #999;">5分钟前</span>
                </div>
                <div class="suggestion-action">
                    🔹 脱磷脱硫优化组合：造渣 + 枪位 + 温度控制<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 补加石灰 <strong style="color: #0066cc;">500 kg</strong> + 白云石 <strong style="color: #0066cc;">150 kg</strong>（提高渣碱度至3.5）<br>
                        ② 提升氧枪枪位至 <strong style="color: #0066cc;">1650 mm</strong>（+70mm，改善搅拌）<br>
                        ③ 维持温度 <strong style="color: #0066cc;">1630-1650°C</strong>（控温喷冷却剂100kg）<br>
                        ④ 调整炉倾角至 <strong style="color: #0066cc;">2.3°</strong>（优化渣金界面）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 强化脱磷脱硫反应动力学条件<br>
                    🎯 预测终点[P]: 0.013‰ (目标≤0.020‰，脱磷率提升12%)<br>
                    🎯 预测终点[S]: 0.009‰ (目标≤0.015‰，脱硫率提升18%)<br>
                    💡 智能均衡: 高碱度+适宜温度+强搅拌=最优脱P脱S条件<br>
                    ⚡ 风险等级: 低 | 置信度: 88%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 88%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 当前[P]: 0.143‰ → 目标: ≤0.020‰（需强化脱磷）<br>
                        • 当前[S]: 0.008‰ (可同步优化脱硫)<br>
                        • 当前渣碱度: 3.0 (偏低，需提高至3.5以上)<br>
                        • 当前枪位: 1580mm (偏低，搅拌不足)<br>
                        • 熔池温度: 1632°C (适宜脱P脱S区间)<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 补石灰+白云石: 提高渣碱度，增强渣相P₂O₅稳定性<br>
                        • 提枪+调倾角: 改善熔池搅拌，加速渣金界面传质<br>
                        • 控温冷却: 维持最优脱P温度窗口（1630-1650°C）<br>
                        • 四参数联动: 同时满足热力学（碱度、温度）和动力学（搅拌）条件
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(2)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(2)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(2)">✗ 拒绝</button>
                </div>
            </div>

            <div class="suggestion-card" id="suggestion3">
                <div class="suggestion-header">
                    <span class="priority-badge priority-medium">中优先级</span>
                    <span style="font-size: 12px; color: #999;">8分钟前</span>
                </div>
                <div class="suggestion-action">
                    🔹 渣况优化套装：造渣 + 枪位角度 + 底吹模式<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 补加石灰 <strong style="color: #0066cc;">500 kg</strong> + 萤石 <strong style="color: #0066cc;">80 kg</strong>（维持碱度+降低粘度）<br>
                        ② 微调枪位角度至 <strong style="color: #0066cc;">15.5°</strong>（优化渣面冲击）<br>
                        ③ 底吹切换脉冲模式 <strong style="color: #0066cc;">85-110 Nm³/min</strong> 交替（强化渣金混合）<br>
                        ④ 降低氧流量 <strong style="color: #0066cc;">500 Nm³/min</strong> 持续1分钟（避免过氧化）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 全面优化炉渣流动性与反应活性<br>
                    🎯 预测渣碱度稳定在: 3.2-3.4 (最优区间)<br>
                    🎯 预测渣中T.Fe降至: 16.8% (降低1.5%，减少铁损)<br>
                    🎯 预测脱硫率提升: 22% (终点[S]降至0.008‰)<br>
                    💰 经济效益: 单炉节省铁损¥280 + 脱硫剂¥120 = ¥400/炉<br>
                    ⚡ 风险等级: 极低 | 置信度: 85%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 85%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 入炉[S]: 0.008‰ (偏高，需强化脱硫)<br>
                        • 当前渣碱度: 2.9 (逐渐下降，需补充)<br>
                        • 渣中T.Fe: 18.3% (偏高，铁损较大)<br>
                        • 炉渣流动性: 中等 (粘度可优化)<br>
                        • 渣金界面混合度: 68% (有提升空间)<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 石灰+萤石: 提高碱度的同时降低炉渣粘度，增强流动性<br>
                        • 调枪角+脉冲底吹: 优化渣金界面波动，强化传质效率<br>
                        • 短时降氧: 降低渣相氧化性，减少FeO生成和铁损<br>
                        • 四参数联动: 造渣配方+枪位控制+底吹模式+氧气节奏
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(3)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(3)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(3)">✗ 拒绝</button>
                </div>
            </div>

            <div class="suggestion-card" id="suggestion4">
                <div class="suggestion-header">
                    <span class="priority-badge priority-high">高优先级</span>
                    <span style="font-size: 12px; color: #999;">刚刚</span>
                </div>
                <div class="suggestion-action">
                    🔹 终点冲刺策略：停氧时机 + 温控 + 合金化准备<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 延后停氧时间至 <strong style="color: #0066cc;">12:40</strong>（+1.5分钟）<br>
                        ② 末期降低氧流至 <strong style="color: #0066cc;">20000 Nm³/min</strong>（缓吹终点）<br>
                        ③ 提前准备冷却剂 <strong style="color: #0066cc;">200 kg</strong> 待命（终点控温）<br>
                        ④ 枪位终点模式调至 <strong style="color: #0066cc;">1720 mm</strong>（避免喷溅）<br>
                        ⑤ 预加锰铁 <strong style="color: #0066cc;">350 kg</strong> + 硅铁 <strong style="color: #0066cc;">180 kg</strong>（加速合金化）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 精准命中终点，快速进入合金化阶段<br>
                    🎯 预测终点温度: 1654°C (目标1640-1660°C，命中率97.5%)<br>
                    🎯 预测终点[C]: 0.039% (目标≤0.05%，精度提升18%)<br>
                    🎯 预测终点[Mn]: 0.095% (合金化后达标)<br>
                    ⏱️ 出钢准备时间缩短: 约50秒<br>
                    ⚡ 风险等级: 低 | 置信度: 92%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 92%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 当前温度趋势: +8.2°C/min (略低于目标+9°C/min)<br>
                        • 当前[C]: 0.082% (脱碳速率0.012%/min，稳定)<br>
                        • ETA分析: 提前停吹导致温度偏低风险35%<br>
                        • 历史相似炉次: 延后1-2分钟命中率提升12%<br>
                        • 合金化时间窗口: 越早准备越好<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 延停氧+末期降流: 补足温升的同时避免过吹<br>
                        • 提枪+冷却剂待命: 防喷溅+终点精确控温<br>
                        • 预加合金: 利用余热加速溶解，缩短出钢时间<br>
                        • 五参数联动: 时机+流量+枪位+温控+合金化一体化决策
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(4)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(4)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(4)">✗ 拒绝</button>
                </div>
            </div>

            <div class="suggestion-card" id="suggestion5">
                <div class="suggestion-header">
                    <span class="priority-badge priority-medium">中优先级</span>
                    <span style="font-size: 12px; color: #999;">10分钟前</span>
                </div>
                <div class="suggestion-action">
                    🔹 均质化强化方案：底吹 + 枪位动态 + 炉倾角<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 增大底吹流量至 <strong style="color: #0066cc;">95 Nm³/min</strong>（+22%）<br>
                        ② 枪位动态调节 <strong style="color: #0066cc;">1580-1650mm</strong> 循环（30秒/周期）<br>
                        ③ 调整炉倾角至 <strong style="color: #0066cc;">2.5°</strong>（优化熔池流动）<br>
                        ④ 顶吹氧流量微降 <strong style="color: #0066cc;">-800 Nm³/min</strong>（平衡搅拌强度）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 全面强化熔池三维搅拌与均质化<br>
                    🎯 熔池温度均匀性提升: ΔT从25°C降至15°C (提升40%)<br>
                    🎯 成分分布标准差降低: 35% (C、Mn、P均匀性显著改善)<br>
                    🎯 脱P脱S效率提升: 15% (界面反应速率加快)<br>
                    💡 智能均衡: 底吹+动态枪位创造立体搅拌场，倾角优化整体流动<br>
                    ⚡ 风险等级: 低 | 置信度: 87%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 87%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 当前底吹流量: 82 Nm³/min (偏低，搅拌不足)<br>
                        • 熔池温度分布不均: ΔT=25°C (存在死区)<br>
                        • 渣金界面传质系数: 0.68 (可提升至0.85)<br>
                        • 副枪检测成分波动: σ[C]=0.012% (偏大)<br>
                        • 炉倾角: 2.1° (流动模式可优化)<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 增底吹: 强化底部上升流，打破温度分层<br>
                        • 动态枪位: 周期性改变冲击区域，消除搅拌盲区<br>
                        • 调倾角: 利用重力优化环流模式，增强横向混合<br>
                        • 微降顶氧: 避免过度搅拌导致氧化或喷溅<br>
                        • 四参数联动: 底吹+枪位+倾角+氧流构建最优流场
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(5)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(5)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(5)">✗ 拒绝</button>
                </div>
            </div>

            <div class="suggestion-card" id="suggestion6" style="opacity: 0.7;">
                <div class="suggestion-header">
                    <span class="priority-badge priority-low">低优先级</span>
                    <span style="font-size: 12px; color: #999;">12分钟前</span>
                </div>
                <div class="suggestion-action">
                    🔹 出钢准备优化：倾角 + 渣位 + 温度储备<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 调整炉倾角至 <strong style="color: #0066cc;">2.5°</strong>（优化渣钢分离）<br>
                        ② 末期适量补加石灰 <strong style="color: #0066cc;">200 kg</strong>（稀化炉渣，便于流动）<br>
                        ③ 终点前提枪至 <strong style="color: #0066cc;">1750 mm</strong>（降低渣位，减少卷渣）<br>
                        ④ 预热包底温度至 <strong style="color: #0066cc;">1200°C</strong>（减少温降）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 全方位优化出钢流程，缩短周转时间<br>
                    ⏱️ 出钢时间缩短: 约55秒 (提升效率8.5%)<br>
                    🎯 渣钢分离质量提升: 卷渣率从3.2%降至1.8%<br>
                    🎯 钢包到站温度提升: +12°C (减少回炉风险)<br>
                    💰 经济效益: 节省回炉成本¥180/炉 + 产能提升收益<br>
                    ⚡ 风险等级: 极低 | 置信度: 79%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 79%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 当前炉倾角: 2.1° (出钢角度偏小)<br>
                        • 预计3-5分钟后达到终点（提前准备窗口）<br>
                        • 当前渣位: 850mm (略高，影响出钢流畅性)<br>
                        • 历史优秀炉次平均倾角: 2.5°<br>
                        • 钢包预热温度: 1180°C (偏低15°C)<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 倾角+提枪: 双重降低渣位，减少钢液夹渣<br>
                        • 补石灰: 稀释炉渣粘度，加速流动分离<br>
                        • 预热钢包: 减少温降，避免终点温度过高补偿<br>
                        • 四参数联动: 物理条件+化学条件全面优化出钢工艺
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(6)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(6)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(6)">✗ 拒绝</button>
                </div>
            </div>

            <div class="suggestion-card" id="suggestion7" style="opacity: 0.7;">
                <div class="suggestion-header">
                    <span class="priority-badge priority-high">高优先级</span>
                    <span style="font-size: 12px; color: #999;">刚刚</span>
                </div>
                <div class="suggestion-action">
                    🔹 泡沫抑制综合方案：枪位 + 氧流 + 消泡 + 底吹<br>
                    <div style="margin-top: 8px; padding-left: 15px; font-size: 11px; color: #303030; line-height: 1.8;">
                        ① 降低枪位至 <strong style="color: #0066cc;">1530 mm</strong>（-50mm，压制泡沫层）<br>
                        ② 短时降氧至 <strong style="color: #0066cc;">23000 Nm³/min</strong> 持续2分钟（-15%，减缓反应）<br>
                        ③ 投入消泡剂 <strong style="color: #0066cc;">200 kg</strong>（化学破泡）<br>
                        ④ 降低底吹至 <strong style="color: #0066cc;">65 Nm³/min</strong>（-21%，减少气泡携带）<br>
                        ⑤ 补加白云石 <strong style="color: #0066cc;">120 kg</strong>（改善渣相粘度）
                    </div>
                </div>
                <div class="suggestion-effect">
                    📊 协同效果: 物理+化学综合抑制泡沫，保障安全生产<br>
                    🎯 预测泡沫指数降至: 2.3 (目标<2.5，降低39%)<br>
                    🎯 预测渣位降低: 从920mm降至780mm（-140mm）<br>
                    🎯 溢渣风险降低: 从45%降至8% (风险大幅下降)<br>
                    💡 智能均衡: 降枪+降氧+降底吹三重物理抑制，消泡剂+白云石化学优化<br>
                    ⚠️ 风险等级: 中 | 置信度: 91%
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" style="width: 91%;"></div>
                </div>
                <details>
                    <summary style="cursor: pointer; color: #0066cc; font-size: 11px;">主要驱动因子与协同原理 ▼</summary>
                    <div style="font-size: 10px; color: #606060; margin-top: 8px; padding-left: 10px; font-family: 'Consolas', monospace;">
                        <strong style="color: #ff8800;">驱动因子：</strong><br>
                        • 泡沫指数: 3.8 (超警戒线3.5，紧急状态)<br>
                        • 渣位高度: 920mm (持续上升中，正常<850mm)<br>
                        • 烟气CO含量: 26% (偏高，脱碳反应剧烈产气)<br>
                        • 视觉AI检测: 泡沫溢出风险45% (高风险)<br>
                        • 底吹流量: 82 Nm³/min (气泡携带加剧泡沫)<br><br>
                        
                        <strong style="color: #0066cc;">协同控制原理：</strong><br>
                        • 降枪+降氧: 降低冲击强度和供氧速率，从源头减少CO生成<br>
                        • 降底吹: 减少气泡上升携带，避免加剧泡沫化<br>
                        • 消泡剂: 破坏泡沫表面张力，快速消泡<br>
                        • 白云石: 改善炉渣流变学特性，降低起泡倾向<br>
                        • 五参数联动: 物理抑制（枪位+氧流+底吹）+ 化学优化（消泡剂+白云石）
                    </div>
                </details>
                <div class="suggestion-buttons">
                    <button class="btn-adopt" onclick="adoptSuggestion(7)">✓ 采纳</button>
                    <button class="btn-adjust" onclick="adjustSuggestion(7)">⚙ 微调</button>
                    <button class="btn-reject" onclick="rejectSuggestion(7)">✗ 拒绝</button>
                </div>
            </div>
        </div>

        <!-- 底部 -->
        <div class="footer">
            <div class="model-info">
                <div class="model-metric">
                    <span class="label">模型版本</span>
                    <span class="value" style="color: #ff8800;">v3.2.1 (二次模型)</span>
                </div>
                <div class="model-metric">
                    <span class="label">当前炉型</span>
                    <span class="value" id="footerFurnaceType">150t转炉</span>
                </div>
                <div class="model-metric">
                    <span class="label">最近训练</span>
                    <span class="value">2025-10-28</span>
                </div>
                <div class="model-metric">
                    <span class="label">离线MAE</span>
                    <span class="value" style="color: #4CAF50;">温度±3.2°C | C±0.006%</span>
                </div>
                <div class="model-metric">
                    <span class="label">在线MAE (7天)</span>
                    <span class="value" style="color: #4CAF50;" id="footerOnlineMAE">温度±4.1°C | 再吹率1.8%</span>
                </div>
                <div class="drift-indicator">
                    <div class="drift-light"></div>
                    <span style="font-size: 12px;">模型稳定</span>
                </div>
            </div>
            <div class="footer-buttons">
                <button class="btn-history" onclick="openHistory()">历史对比</button>
                <button class="btn-retrain" onclick="openModelManagement()">模型管理</button>
            </div>
        </div>
    </div>

    <!-- 历史对比弹窗 -->
    <div class="modal" id="historyModal">
        <div class="modal-content" style="max-width: 1200px;">
            <div class="modal-header">
                <h2>历史炉次对比分析</h2>
                <span class="modal-close" onclick="closeModal('historyModal')">&times;</span>
            </div>
            
            <div class="form-group">
                <label>选择对比炉次</label>
                <select id="historySelect" onchange="updateHistoryComparison()">
                    <option value="20251101-005">20251101-005 (优秀炉次)</option>
                    <option value="20251101-003">20251101-003 (普通炉次)</option>
                    <option value="20251031-012">20251031-012 (问题炉次)</option>
                </select>
            </div>

            <!-- 关键指标对比表 -->
            <div style="margin-top: 20px; padding: 15px; background: #f5f5f7; border: 2px solid #d0d0d0; border-left: 4px solid #0066cc; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h4 style="margin-bottom: 12px; color: #0066cc; text-transform: uppercase; letter-spacing: 1px; font-size: 13px;">关键指标对比</h4>
                <table style="width: 100%; font-size: 12px; border-collapse: collapse; font-family: 'Consolas', monospace;">
                    <thead>
                        <tr style="background: rgba(0,102,204,0.08); border-bottom: 2px solid #d0d0d0;">
                            <th style="padding: 8px; text-align: left; color: #606060;">指标</th>
                            <th style="padding: 8px; text-align: center; color: #606060;">当前炉次<br>150t-3#炉-20251102-001</th>
                            <th style="padding: 8px; text-align: center; color: #606060;">对比炉次<br>150t-3#炉-20251101-005</th>
                            <th style="padding: 8px; text-align: center; color: #606060;">差异</th>
                        </tr>
                    </thead>
                    <tbody id="comparisonTableBody">
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">终点温度 (°C)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">1648</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">1652</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">-4 (更稳定)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">终点碳含量 (%)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">0.043</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">0.047</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">-0.004 (更优)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">终点[P] (‰)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">0.015</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">0.018</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">-0.003 (更优)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">吹炼时长 (分钟)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">16.8</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">15.6</td>
                            <td style="padding: 8px; text-align: center; color: #ff8800;">+1.2 (略长)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">累计氧耗 (Nm³)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">15200</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">15450</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">-250 (节省)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">石灰消耗 (kg)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">2500</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">2650</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">-150 (节省)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">渣中T.Fe (%)</td>
                            <td style="padding: 8px; text-align: center; color: #0066cc;">18.3</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">19.8</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">-1.5 (更优)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">温度命中率</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44; font-weight: bold;">✓ 命中</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44; font-weight: bold;">✓ 命中</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">-</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; color: #303030; font-weight: bold;">碳含量命中率</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44; font-weight: bold;">✓ 命中</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44; font-weight: bold;">✓ 命中</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 曲线对比图表说明 -->
            <div style="margin-top: 20px; padding: 15px; background: white; border: 2px solid #d0d0d0; border-left: 4px solid #ff8800; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h4 style="margin-bottom: 12px; color: #ff8800; text-transform: uppercase; letter-spacing: 1px; font-size: 13px;">📈 关键参数曲线对比</h4>
                
                <!-- 温度曲线对比 -->
                <div style="margin-bottom: 20px; padding: 12px; background: #f5f5f7; border-left: 3px solid #0066cc;">
                    <div style="font-size: 12px; font-weight: bold; color: #0066cc; margin-bottom: 8px;">🌡️ 温度变化曲线</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 11px; font-family: 'Consolas', monospace;">
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">当前炉次 (蓝色曲线)</div>
                            <div style="color: #303030; line-height: 1.6;">
                                • 起始温度: 1349.7°C<br>
                                • 最高温度: 1652°C<br>
                                • 终点温度: 1648°C<br>
                                • 温升速率: 8.2°C/min<br>
                                • 温度波动: ±5°C (稳定)
                            </div>
                        </div>
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">对比炉次 (橙色曲线)</div>
                            <div style="color: #606060; line-height: 1.6;">
                                • 起始温度: 1345.2°C<br>
                                • 最高温度: 1658°C<br>
                                • 终点温度: 1652°C<br>
                                • 温升速率: 9.1°C/min<br>
                                • 温度波动: ±8°C (一般)
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 8px; padding: 8px; background: rgba(0,170,68,0.1); border-radius: 3px; font-size: 11px; color: #00aa44;">
                        ✓ 分析：当前炉次温度控制更加稳定，波动幅度减少37.5%，温升曲线更加平稳
                    </div>
                </div>

                <!-- 碳含量曲线对比 -->
                <div style="margin-bottom: 20px; padding: 12px; background: #f5f5f7; border-left: 3px solid #ff8800;">
                    <div style="font-size: 12px; font-weight: bold; color: #ff8800; margin-bottom: 8px;">⚗️ 碳含量变化曲线</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 11px; font-family: 'Consolas', monospace;">
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">当前炉次 (蓝色曲线)</div>
                            <div style="color: #303030; line-height: 1.6;">
                                • 初始[C]: 3.85%<br>
                                • 中期[C]: 0.35% (10min)<br>
                                • 终点[C]: 0.043%<br>
                                • 脱碳速率: 0.022%/min<br>
                                • 脱碳平稳性: 优秀
                            </div>
                        </div>
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">对比炉次 (橙色曲线)</div>
                            <div style="color: #606060; line-height: 1.6;">
                                • 初始[C]: 3.92%<br>
                                • 中期[C]: 0.38% (9min)<br>
                                • 终点[C]: 0.047%<br>
                                • 脱碳速率: 0.025%/min<br>
                                • 脱碳平稳性: 良好
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 8px; padding: 8px; background: rgba(0,170,68,0.1); border-radius: 3px; font-size: 11px; color: #00aa44;">
                        ✓ 分析：当前炉次脱碳过程更加平稳，终点碳含量控制精度提高8.5%
                    </div>
                </div>

                <!-- 氧流量曲线对比 -->
                <div style="margin-bottom: 20px; padding: 12px; background: #f5f5f7; border-left: 3px solid #00aa44;">
                    <div style="font-size: 12px; font-weight: bold; color: #00aa44; margin-bottom: 8px;">💨 氧气流量控制曲线</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 11px; font-family: 'Consolas', monospace;">
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">当前炉次 (蓝色曲线)</div>
                            <div style="color: #303030; line-height: 1.6;">
                                • 初期流量: 28000 Nm³/min<br>
                                • 中期流量: 26500 Nm³/min<br>
                                • 末期流量: 22000 Nm³/min<br>
                                • 平均流量: 26500 Nm³/min<br>
                                • 流量波动: ±850 Nm³/min
                            </div>
                        </div>
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">对比炉次 (橙色曲线)</div>
                            <div style="color: #606060; line-height: 1.6;">
                                • 初期流量: 28500 Nm³/min<br>
                                • 中期流量: 27200 Nm³/min<br>
                                • 末期流量: 23000 Nm³/min<br>
                                • 平均流量: 27200 Nm³/min<br>
                                • 流量波动: ±1000 Nm³/min
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 8px; padding: 8px; background: rgba(0,170,68,0.1); border-radius: 3px; font-size: 11px; color: #00aa44;">
                        ✓ 分析：当前炉次氧流量控制波动减少15%，控制更加精准，减少了氧气浪费
                    </div>
                </div>

                <!-- 枪位曲线对比 -->
                <div style="padding: 12px; background: #f5f5f7; border-left: 3px solid #663399;">
                    <div style="font-size: 12px; font-weight: bold; color: #663399; margin-bottom: 8px;">🎯 氧枪枪位调整曲线</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 11px; font-family: 'Consolas', monospace;">
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">当前炉次 (蓝色曲线)</div>
                            <div style="color: #303030; line-height: 1.6;">
                                • 初期枪位: 1800 mm<br>
                                • 中期枪位: 1620 mm<br>
                                • 末期枪位: 1650 mm<br>
                                • 平均枪位: 1620 mm<br>
                                • 调整次数: 8次 (平稳)
                            </div>
                        </div>
                        <div>
                            <div style="color: #606060; margin-bottom: 5px;">对比炉次 (橙色曲线)</div>
                            <div style="color: #606060; line-height: 1.6;">
                                • 初期枪位: 1800 mm<br>
                                • 中期枪位: 1580 mm<br>
                                • 末期枪位: 1600 mm<br>
                                • 平均枪位: 1580 mm<br>
                                • 调整次数: 12次 (频繁)
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 8px; padding: 8px; background: rgba(0,170,68,0.1); border-radius: 3px; font-size: 11px; color: #00aa44;">
                        ✓ 分析：当前炉次枪位调整更加合理，减少了33%的调整次数，操作更加智能化
                    </div>
                </div>

                <!-- 图表说明 -->
                <div style="margin-top: 15px; padding: 10px; background: rgba(0,102,204,0.05); border-radius: 3px; font-size: 11px; color: #606060; text-align: center;">
                    💡 提示：以上数据基于实时采集的过程参数，曲线对比反映了AI模型优化后的控制效果
                </div>
            </div>

            <!-- 过程参数对比 -->
            <div style="margin-top: 20px; padding: 15px; background: rgba(255,136,0,0.08); border: 2px solid #ff8800; border-left: 4px solid #ff8800; box-shadow: 0 2px 8px rgba(255,136,0,0.15);">
                <h4 style="margin-bottom: 12px; color: #ff8800; text-transform: uppercase; letter-spacing: 1px; font-size: 13px;">过程参数对比</h4>
                <table style="width: 100%; font-size: 12px; border-collapse: collapse; font-family: 'Consolas', monospace;">
                    <thead>
                        <tr style="background: rgba(255,136,0,0.1); border-bottom: 2px solid #ff8800;">
                            <th style="padding: 8px; text-align: left; color: #606060;">过程参数</th>
                            <th style="padding: 8px; text-align: center; color: #606060;">当前炉次</th>
                            <th style="padding: 8px; text-align: center; color: #606060;">对比炉次</th>
                            <th style="padding: 8px; text-align: center; color: #606060;">评价</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid #ffd699;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">平均氧流量 (Nm³/min)</td>
                            <td style="padding: 8px; text-align: center; color: #303030;">26500</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">27200</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">控制更稳</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ffd699;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">氧流量波动 (标准差)</td>
                            <td style="padding: 8px; text-align: center; color: #303030;">±850</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">±1000</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">波动减少15%</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ffd699;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">平均枪位 (mm)</td>
                            <td style="padding: 8px; text-align: center; color: #303030;">1620</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">1580</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">略高</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ffd699;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">脱碳速率 (%/min)</td>
                            <td style="padding: 8px; text-align: center; color: #303030;">0.022</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">0.025</td>
                            <td style="padding: 8px; text-align: center; color: #ff8800;">可优化</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ffd699;">
                            <td style="padding: 8px; color: #303030; font-weight: bold;">温升速率 (°C/min)</td>
                            <td style="padding: 8px; text-align: center; color: #303030;">8.2</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">9.1</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">正常</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; color: #303030; font-weight: bold;">泡沫预警次数</td>
                            <td style="padding: 8px; text-align: center; color: #303030;">1</td>
                            <td style="padding: 8px; text-align: center; color: #606060;">2</td>
                            <td style="padding: 8px; text-align: center; color: #00aa44;">减少50%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 对比分析摘要 -->
            <div style="margin-top: 20px; padding: 15px; background: #f5f5f7; border: 2px solid #d0d0d0; border-left: 4px solid #0066cc; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h4 style="margin-bottom: 10px; color: #0066cc; text-transform: uppercase; letter-spacing: 1px; font-size: 13px;">对比分析摘要</h4>
                <ul style="font-size: 12px; color: #606060; line-height: 2; font-family: 'Consolas', monospace;">
                    <li style="color: #00aa44;">✓ 本炉次氧流量控制更平稳，波动减少 15%</li>
                    <li style="color: #00aa44;">✓ ML建议采纳率 78%，高于对比炉次的 45%</li>
                    <li style="color: #00aa44;">✓ 终点命中率提升 12%，温度偏差缩小 5°C</li>
                    <li style="color: #00aa44;">✓ 累计氧耗降低 250 Nm³，石灰消耗减少 150 kg</li>
                    <li style="color: #00aa44;">✓ 渣中T.Fe控制更优，降低 1.5%，炉渣流动性更好</li>
                    <li style="color: #00aa44;">✓ 泡沫预警次数减少 50%，过程控制更稳定</li>
                    <li style="color: #ff8800;">⚠ 吹炼时长略长 1.2分钟，可优化前期脱碳速率</li>
                    <li style="color: #0066cc;">💡 建议：保持当前控制策略，在前期适当提高脱碳速率以缩短吹炼时长</li>
                </ul>
            </div>

            <!-- 经济效益分析 -->
            <div style="margin-top: 20px; padding: 15px; background: rgba(0,170,68,0.08); border: 2px solid #00aa44; border-left: 4px solid #00aa44; box-shadow: 0 2px 6px rgba(0,170,68,0.15);">
                <h4 style="margin-bottom: 10px; color: #00aa44; text-transform: uppercase; letter-spacing: 1px; font-size: 13px;">经济效益分析</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; font-size: 12px; font-family: 'Consolas', monospace;">
                    <div style="padding: 10px; background: white; border: 1px solid #d0d0d0; border-radius: 4px;">
                        <div style="color: #606060; margin-bottom: 5px;">氧气成本节省</div>
                        <div style="color: #00aa44; font-size: 20px; font-weight: bold;">¥75</div>
                        <div style="color: #999; font-size: 10px;">250 Nm³ × ¥0.30/Nm³</div>
                    </div>
                    <div style="padding: 10px; background: white; border: 1px solid #d0d0d0; border-radius: 4px;">
                        <div style="color: #606060; margin-bottom: 5px;">石灰成本节省</div>
                        <div style="color: #00aa44; font-size: 20px; font-weight: bold;">¥120</div>
                        <div style="color: #999; font-size: 10px;">150 kg × ¥0.80/kg</div>
                    </div>
                    <div style="padding: 10px; background: white; border: 1px solid #d0d0d0; border-radius: 4px;">
                        <div style="color: #606060; margin-bottom: 5px;">单炉次总节省</div>
                        <div style="color: #00aa44; font-size: 20px; font-weight: bold;">¥195</div>
                        <div style="color: #999; font-size: 10px;">预计年节省 ¥14.2万</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 模型管理弹窗 -->
    <div class="modal" id="modelModal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2>模型训练与管理</h2>
                <span class="modal-close" onclick="closeModal('modelModal')">&times;</span>
            </div>
            <div style="margin-bottom: 15px; padding: 10px; background: #f5f5f7; border: 2px solid #d0d0d0; border-left: 4px solid #0066cc; box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);">
                <strong style="color: #0066cc;">当前炉型：</strong><span id="modalFurnaceType" style="color: #ff8800;">150t转炉</span> | 
                <strong style="color: #0066cc;">模型适用范围：</strong><span style="color: #303030;">150t/250t通用模型</span>
            </div>
            <table class="model-version-table">
                <thead>
                    <tr>
                        <th>版本</th>
                        <th>训练日期</th>
                        <th>数据范围</th>
                        <th>MAE (温度)</th>
                        <th>MAE (C)</th>
                        <th>MAE (P)</th>
                        <th>再吹率</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="current-version">v3.2.1 ★</td>
                        <td>2025-10-28</td>
                        <td>150t+250t (1850炉)</td>
                        <td>±3.2°C</td>
                        <td>±0.006%</td>
                        <td>±1.8‰</td>
                        <td>1.2%</td>
                        <td><span style="color: #00aa44;">● 生产中</span></td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>v3.2.0</td>
                        <td>2025-10-15</td>
                        <td>150t+250t (1650炉)</td>
                        <td>±3.5°C</td>
                        <td>±0.007%</td>
                        <td>±2.1‰</td>
                        <td>1.5%</td>
                        <td><span style="color: #808080;">已下线</span></td>
                        <td><button style="padding: 5px 10px; font-size: 10px; background: rgba(0,102,204,0.1); border: 2px solid #0066cc; color: #0066cc; cursor: pointer;" onclick="alert('回滚至v3.2.0')">回滚</button></td>
                    </tr>
                    <tr>
                        <td>v3.1.5</td>
                        <td>2025-09-28</td>
                        <td>150t单炉型 (820炉)</td>
                        <td>±4.1°C</td>
                        <td>±0.008%</td>
                        <td>±2.5‰</td>
                        <td>1.8%</td>
                        <td><span style="color: #808080;">已归档</span></td>
                        <td><button style="padding: 5px 10px; font-size: 10px; background: rgba(102,51,153,0.1); border: 2px solid #663399; color: #663399; cursor: pointer;" onclick="showModelDetails('v3.1.5')">详情</button></td>
                    </tr>
                    <tr>
                        <td>v3.1.2</td>
                        <td>2025-09-10</td>
                        <td>250t单炉型 (730炉)</td>
                        <td>±4.5°C</td>
                        <td>±0.009%</td>
                        <td>±2.8‰</td>
                        <td>2.1%</td>
                        <td><span style="color: #808080;">已归档</span></td>
                        <td><button style="padding: 5px 10px; font-size: 10px; background: rgba(102,51,153,0.1); border: 2px solid #663399; color: #663399; cursor: pointer;" onclick="showModelDetails('v3.1.2')">详情</button></td>
                    </tr>
                </tbody>
            </table>
            <div style="margin-top: 15px; padding: 12px; background: rgba(255,136,0,0.08); border: 2px solid #ff8800; border-left: 4px solid #ff8800; box-shadow: 0 2px 6px rgba(255,136,0,0.15);">
                <strong style="color: #ff8800;">🔍 模型架构：</strong><span style="color: #303030;">XGBoost + LSTM混合模型</span><br>
                <strong style="color: #ff8800;">📊 特征数：</strong><span style="color: #303030;">85个（包含过程参数、原料成分、历史统计特征）</span><br>
                <strong style="color: #ff8800;">⚙️ 在线推理延迟：</strong><span style="color: #303030;">&lt;50ms</span>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: rgba(0,170,68,0.08); border: 2px solid #00aa44; border-left: 4px solid #00aa44; box-shadow: 0 2px 6px rgba(0,170,68,0.15);">
                <strong style="color: #00aa44;">📈 漂移检测报告（最近30天）</strong><br>
                <div style="font-size: 12px; color: #606060; margin-top: 8px; font-family: 'Consolas', monospace;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <div>
                            <strong style="color: #0066cc;">150t转炉：</strong><br>
                            KS统计量: 0.08 (正常)<br>
                            PSI: 0.03 (低漂移)<br>
                            数据量: 425炉
                        </div>
                        <div>
                            <strong style="color: #0066cc;">250t转炉：</strong><br>
                            KS统计量: 0.07 (正常)<br>
                            PSI: 0.04 (低漂移)<br>
                            数据量: 382炉
                        </div>
                    </div>
                </div>
            </div>
            <div style="margin-top: 15px; padding: 15px; background: rgba(0,102,204,0.08); border: 2px solid #0066cc; border-left: 4px solid #0066cc; box-shadow: 0 2px 6px rgba(0,102,204,0.15);">
                <strong style="color: #0066cc;">📊 炉型性能对比（最近100炉）</strong><br>
                <table style="width: 100%; margin-top: 10px; font-size: 12px; font-family: 'Consolas', monospace;">
                    <tr style="border-bottom: 2px solid #d0d0d0;">
                        <th style="text-align: left; padding: 8px; color: #606060;">指标</th>
                        <th style="text-align: center; padding: 8px; color: #606060;">150t转炉</th>
                        <th style="text-align: center; padding: 8px; color: #606060;">250t转炉</th>
                    </tr>
                    <tr>
                        <td style="padding: 8px; color: #303030;">温度命中率</td>
                        <td style="text-align: center; color: #00aa44; font-weight: bold;">96.2%</td>
                        <td style="text-align: center; color: #00aa44; font-weight: bold;">94.8%</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; color: #303030;">碳含量命中率</td>
                        <td style="text-align: center; color: #00aa44; font-weight: bold;">93.5%</td>
                        <td style="text-align: center; color: #00aa44; font-weight: bold;">91.2%</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; color: #303030;">平均再吹率</td>
                        <td style="text-align: center; color: #303030;">1.8%</td>
                        <td style="text-align: center; color: #303030;">1.2%</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; color: #303030;">平均吹炼时间</td>
                        <td style="text-align: center; color: #303030;">16.2 分钟</td>
                        <td style="text-align: center; color: #303030;">18.5 分钟</td>
                    </tr>
                </table>
            </div>
            <button class="btn-retrain" style="margin-top: 15px; width: 100%; padding: 12px;" onclick="triggerRetrain()">
                触发模型重训练
            </button>
        </div>
    </div>

    <script src="js/secondary_app.js"></script>
</body>
</html>

